<html>
	<head>
		<title>The Image Sharing Network</title>
		<style>
			body {background-color:#e9e9e9}
			p {text-align: center; font-family:sans-serif; font-size:12;}
		</style>
		<script language="JavaScript" type="text/javascript" src="/JSAJAX.js">;</script>
		<script language="JavaScript" type="text/javascript" src="/JSUser.js">;</script>
		<script>
			var user;
			function getUsername() {
				user = new User();
				var p = document.getElementById("up");
				if (user.isLoggedIn) {
					if (user.usersImpl != "xml") {
						x = document.getElementById("usermanager");
						if (x) x.parentNode.removeChild(x);
					}
					p.appendChild(document.createTextNode("You are logged in as "+user.name+"."));
					p.appendChild(document.createElement("BR"));
					var a = document.createElement("A");
					a.setAttribute("href","/login?logout");
					a.appendChild(document.createTextNode("logout"));
					p.appendChild(document.createTextNode("( "));
					p.appendChild(a);
					p.appendChild(document.createTextNode(" )"));
				}
				else {
					p.appendChild(document.createTextNode("You are not logged in."));
				}
				if (!user.hasRole("export")) disable("exportID");
				if (!user.hasRole("import")) disable("importID");
				if (!user.hasRole("admin")) hideAdmin();
			}
			function hideAdmin() {
				var x = document.getElementById("adminDiv");
				if (x) x.parentNode.removeChild(x);
				x = document.getElementById("auditLog");
				if (x) x.parentNode.removeChild(x);
			}
			function disable(id) {
				var x = document.getElementById(id);
				if (x) x.disabled = true;
			}
			function loaded() { getUsername(); }
			window.onload = loaded;
		</script>
	</head>
	<body>
		<center>
		<h1>The Image Sharing Network</h1>

		<table>
			</tr>
				<td colspan="2" style="text-align:center">
					<input style="width:125" type="button" value="Login"
						onclick="window.open('login','_self');">
				</td>
			</tr>
			</tr><td>&nbsp;</td></tr>
			<tr>
				<td id="export">
					<input id="exportID" style="width:125" type="button" value="Send"
						onclick="window.open('/xds-export','_self');">
				</td>
				<td id="import">
					<input id="importID" style="width:125" type="button" value="Receive"
						onclick="window.open('/xds-import','_self');">
				</td>
			</tr>
			</tr><td>&nbsp;</td></tr>
			<tr>
				<td colspan="2" style="text-align:center">
					<input style="width:125" type="button" value="Tools"
						onclick="window.open('/isn-tool','CTP');">
				</td>
			</tr>
			<tr id="auditLog">
				<td colspan="2" style="text-align:center">
					<input style="width:125" type="button" value="Audit Log"
						onclick="window.open('/AuditLog','AUDIT');">
				</td>
			</tr>
		</table>

		<div id="adminDiv">
			<br/><br/>
			<h2>Admin Functions</h2>

			<div style="width:30%;display:inline">
				<table>
					<tr id="usermanager">
						<td><input style="width:300" type="button" value="User Manager"
								onclick="window.open('users','_self');"></td>
					</tr>
					<tr>
						<td><input style="width:300" type="button" value="Configuration"
								onclick="window.open('configuration','_self');"></td>
					</tr>
					<tr>
						<td><input style="width:300" type="button" value="System Properties"
								onclick="window.open('system','_self');"></td>
					</tr>
					<tr id="shutdown">
						<td><input style="width:300" type="button" value="Shutdown"
								onclick="window.open('shutdown','_self');"></td>
					</tr>
				</table>
			</div>

			<div style="width:30%;display:inline">
				<table>
					<tr>
						<td><input style="width:300" type="button" value="Status"
								onclick="window.open('status','_self');"></td>
					</tr>
					<tr>
						<td><input style="width:300" type="button" value="Logs"
								onclick="window.open('logs','_self');"></td>
					</tr>
					<tr>
						<td><input style="width:300" type="button" value="Quarantines"
								onclick="window.open('quarantines','_self');"></td>
					</tr>
					<tr id="idmap">
						<td><input style="width:300" type="button" value="ID Map"
								onclick="window.open('idmap','_self');"></td>
					</tr>
					<tr id="objecttracker">
						<td><input style="width:300" type="button" value="Object Tracker"
								onclick="window.open('objecttracker','_self');"></td>
					</tr>
					<tr id="databaseverifier">
						<td><input style="width:300" type="button" value="Database Verifier"
								onclick="window.open('databaseverifier','_self');"></td>
					</tr>
				</table>

			</div>

			<div style="width:30%;display:inline">
				<table>
					<tr id="daconfig">
						<td><input style="width:300" type="button" value="DICOM Anonymizer Configurator"
								onclick="window.open('daconfig','_self');"></td>
					</tr>
					<tr id="script">
						<td><input style="width:300" type="button" value="Script Editor"
								onclick="window.open('script','_self');"></td>
					</tr>
					<tr id="lookup">
						<td><input style="width:300" type="button" value="Lookup Table Editor"
								onclick="window.open('lookup','_self');"></td>
					</tr>
				</table>
			</div>

			<h2>Documentation</h2>

			<div>
				<table>
					<tr>
						<td><input style="width:300" type="button" value="ISN Documentation"
								onclick="window.open('http://mircwiki.rsna.org/index.php?title=CTP_Configuration_for_the_Image_Sharing_Project','wiki');"></td>
					</tr>
					<tr>
						<td><input style="width:300" type="button" value="CTP Documentation"
								onclick="window.open('http://mircwiki.rsna.org/index.php?title=CTP-The_RSNA_Clinical_Trial_Processor','wiki');"></td>
					</tr>
					<tr>
						<td><input style="width:300" type="button" value="DICOM Anonymizer Documentation"
								onclick="window.open('http://mircwiki.rsna.org/index.php?title=The_CTP_DICOM_Anonymizer','wiki');"></td>
					</tr>
					<tr>
						<td><input style="width:300" type="button" value="DicomFilter Script Documentation"
								onclick="window.open('http://mircwiki.rsna.org/index.php?title=The_CTP_DICOM_Filter','wiki');"></td>
					</tr>
					<tr>
						<td><input style="width:300" type="button" value="XML Anonymizer Documentation"
								onclick="window.open('http://mircwiki.rsna.org/index.php?title=The_CTP_XML_Anonymizer','wiki');"></td>
					</tr>
				</table>
			</div>

		</div>

		<p id="up"/>
		</center>
	</body>
</html>